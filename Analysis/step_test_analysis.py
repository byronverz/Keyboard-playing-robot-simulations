# -*- coding: utf-8 -*-
"""
Created on Wed Oct  7 12:07:26 2020

@author: byron
"""

import numpy as np
import matplotlib.pyplot as plt

with open('step_test_with_linear_controller_frequency_1.txt','r') as f:
    freq = np.genfromtxt(f)

with open('step_test_with_linear_controller_error_1.txt','r') as e:
    error = np.genfromtxt(e)

with open('step_test_with_linear_controller_distance_1.txt','r') as d:
    dist = np.genfromtxt(d)

with open("moves_with_PI_controller_freqs.txt", 'r') as p:
    # pi = np.abs(np.genfromtxt(p))
    pi = [ 4.54756150e+02, -3.17306602e+03, -3.17683899e+03, -3.18061195e+03,
       -2.98815159e+03, -2.99169122e+03, -2.99523086e+03, -2.99877049e+03,
       -3.00231013e+03, -1.99664976e+03, -1.99898940e+03, -2.00132903e+03,
       -2.00366866e+03, -9.33733300e+02, -9.34797934e+02, -9.35862569e+02,
       -9.36927203e+02, -4.89458505e+02, -4.89989806e+02, -4.90521107e+02,
       -4.91052408e+02, -2.04242043e+02, -2.04431677e+02, -2.04621312e+02,
       -2.04810947e+02, -2.12008915e+02, -2.12206882e+02, -2.12404850e+02,
       -2.12602818e+02, -1.42717453e+02, -1.42832087e+02, -1.42946722e+02,
       -1.43061357e+02, -1.15142658e+02, -1.15223959e+02, -1.15305260e+02,
       -1.15386562e+02, -5.94011962e+01, -5.94158308e+01, -5.94304654e+01,
       -5.94451000e+01,  1.76319321e+01,  1.77089642e+01,  1.77859963e+01,
        1.78630283e+01, -3.08493958e+00, -3.03290750e+00, -2.98087542e+00,
       -1.15062177e+02, -1.15143478e+02, -1.15224779e+02, -1.15306080e+02,
       -1.15387382e+02, -6.64103496e+01, -6.64333175e+01, -6.64562854e+01,
       -6.64792533e+01, -1.57610555e+02, -1.57741856e+02, -1.57873157e+02,
       -1.58004458e+02,  5.21142404e+01,  5.22329392e+01,  5.23516379e+01,
        5.24703367e+01,  5.25890354e+01,  5.27077342e+01,  5.28264329e+01,
        5.29451317e+01,  1.30155497e+02,  1.30365863e+02,  1.30576228e+02,
        1.30786593e+02,  7.49302921e+01,  7.50739908e+01,  7.52176896e+01,
        7.53613883e+01, -8.59491292e+00, -8.55121417e+00, -8.50751542e+00,
       -8.46381667e+00, -1.54284512e+01, -1.53930858e+01, -1.53577204e+01,
       -1.53223550e+01, -2.93036562e+01, -2.92849575e+01, -2.92662587e+01,
       -2.92475600e+01, -7.12788612e+01, -7.13101625e+01, -7.13414637e+01,
       -7.13727650e+01,  2.67126004e+01,  2.67979658e+01,  2.68833313e+01,
        2.69686967e+01, -3.60209379e+01, -3.60105725e+01, -3.60002071e+01,
       -3.59898417e+01,  8.31621904e+01,  8.33142225e+01,  8.34662546e+01,
        8.36182867e+01, -2.83630146e+01, -2.83443158e+01, -2.83256171e+01,
       -2.83069183e+01, -1.12388220e+02, -1.12469521e+02, -1.12550822e+02,
       -1.12632123e+02, -1.26730091e+02, -1.26828059e+02, -1.26926027e+02,
       -1.27023995e+02, -7.10552962e+01, -7.10865975e+01, -7.11178987e+01,
        9.70508000e+01,  9.72194988e+01,  9.73881975e+01,  9.75568963e+01,
        9.77255950e+01,  7.68692938e+01,  7.70129925e+01,  7.71566913e+01,
        7.73003900e+01, -6.65591125e+00, -6.61221250e+00, -6.56851375e+00,
       -6.52481500e+00, -5.55394496e+01, -5.55540842e+01, -5.55687187e+01,
       -2.75500200e+01, -2.75313212e+01, -2.75126225e+01, -2.74939237e+01,
       -2.74752250e+01,  7.76684738e+01,  7.78121725e+01,  7.79558713e+01,
        8.01623667e+00,  8.07660208e+00,  8.13696750e+00,  8.19733292e+00,
        8.25769833e+00, -1.97152696e+01, -1.96882375e+01, -1.96612054e+01,
       -1.96341733e+01]
    
sp = [0 for i in range(10)]
for t in range(404):
    sp.append(658.028)

x = np.arange(0,0.3125,0.0125)

z = np.polyfit(x,pi[5:30],5)    
y2 = z[0]*x**5+z[1]*x**4+z[2]*x**3+z[3]*x**2+z[4]*x

# fig, ax2= plt.subplots()

steps = [6, 342, 888, 1459 ,1947, 2308, 2500]
steps_tot = 0
for f in steps:
    steps_tot += f*0.01

l = steps_tot*0.45*(np.pi/180)*37.5
t = (l)/(2500*0.45*(np.pi/180)*37.5)
print(l,t)
# ax1.plot(dist)
# ax1.hlines([579.74],0,3)
# ax1.vlines([3], 0,580)
# ax1.plot(x,sp)
# plt.xticks(x)
# ax2 = plt.twinx()
# plt.plot(error)
# ax2.plot(x,pi[5:30], color='red')
# ax2.plot(y2[::2], 'go')
# print(z)